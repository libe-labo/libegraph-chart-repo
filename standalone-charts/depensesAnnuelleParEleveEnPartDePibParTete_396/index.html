<html>
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dépenses annuelle par élève en part de PIB par tête</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.5.1/css/bulma.min.css"> -->
  <link type="text/css" rel="stylesheet" href="https://statics.liberation.fr/newsite/css/fonts.css">
  <link rel="stylesheet" href="../utilities/css/bulma-custom.css">
  <link rel="stylesheet" href="../utilities/css/styles.css">
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.10.16/b-1.5.1/fh-3.1.3/kt-2.3.2/r-2.2.1/sc-1.4.4/datatables.min.css"/>

  <style type="text/css">
    
#pictoLibe{
  height: 10px !important;
}


.annotation-note-label {
    font-size: 0.7rem;
}   

h3#chartTitle{

    text-align: center;
}
  </style>



</head>
<body>

  <section>
    <div id="chart" style="max-width: 1000px">
      <h3 id="chartTitle"></h3>
      <div id="varSwitch" class='tags'></div>
      <svg width="600" height="400"></svg>
      <footer>
        <div class="credits">
          <a href="http://www.liberation.fr/data-nouveaux-formats-six-plus,100538" target="_blank">Six Plus</a>
        </div>
        <div class="sources">Source: <span id="chartSource">Libération</span></div>
        <p><span>Réalisé avec <img id="pictoLibe" src="../utilities/img/LibeSimple.svg" alt="Picto Liberation" height="10px" /> LibéGraph</span></p>
      </footer>

    </div>
    <div id="noChart" style="display:none;"></div>
  </section>


  <!-- JS -->
  <script src="../utilities/js/jquery-1.10.2.js"></script>

  <script src="https://d3js.org/d3.v4.js"></script>
  <script src="../utilities/js/d3-annotation.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.24.0/d3-legend.min.js"></script>
  <script src="https://unpkg.com/d3-area-label@1.2.0"></script>
  <script src="../utilities/js/d3-scale-chromatic.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js"></script>
  <script type="text/javascript" src="../utilities/js/moment-with-locales.min.js"></script>
  <!-- <script src="static/js/app.js"></script> -->
<script type="text/javascript" src="https://cdn.datatables.net/v/dt/dt-1.10.16/b-1.5.1/fh-3.1.3/kt-2.3.2/r-2.2.1/sc-1.4.4/datatables.min.js"></script>
<script type="text/javascript" src="chart_utilities_functions.js"></script>
  <script type="text/javascript">

   var margin = {},
   width,
   height;
   var initMargin = {
    top: 20,
    right: 20,
    bottom: 60,
    left: 40
  };


  var initTotalWidth = 600;
  var initTotalHeight = 400;

  var initWidth = initTotalWidth - initMargin.left - initMargin.right;
  var initHeight = initTotalHeight - initMargin.top - initMargin.bottom;

  var libeCategoricalColors = ['#e61e49', '#7c7c7c', '#000'];

  var political_colors_obj = {
    'EXG': "#751719",
    'FI': "#cd0420",
    "COM":'#af0e1d',
    "ECO":'#52ae56',
    "SOC":'#e6467e',
    "DVG":'#f46099',
    "RDG":'#f781b6',
    'DIV': "#cccccc",
    'REG': "#666",
    "REM":'#ffb400',
    "MDM":'#e85d21',
    "UDI":'#9f64a2',
    "DVD":'#026db5',
    "LR":'#0058a2',
    "DLF":'#003366',
    "EXD":'#03034f',
    "FN":'#000032'
  };

  var LibePoliticalColors =["#751719", "#cd0420", "#af0e1d", "#52ae56", "#e6467e", "#f46099", "#f781b6", "#cccccc", "#666", "#ffb400", "#e85d21", "#9f64a2", "#026db5", "#0058a2", "#003366", "#03034f", "#000032"];

  var color = d3.scaleOrdinal(libeCategoricalColors);


  var categorical_color_sheme = ['libeCategoricalColors', 'LibePoliticalColors', 'schemeDark2', 'schemeAccent', 'schemePastel2', 'schemeSet2', 'schemeSet1', 'schemePastel1', 
  'schemeCategory10', 'schemeSet3', 'schemePaired', 'schemeCategory20', 'schemeCategory20b', 'schemeCategory20c'];

  var basicColors = {plain:{initial:"#e61e49", personalized:null}, positive:{initial:'#85b4b2', personalized:null}, negative:{initial:"#e61e49", personalized:null}};


  var data = [{"value":"8251.454","COUNTRY":"AUSTRALIE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"17.479","COUNTRY":"AUSTRALIE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"11022.751","COUNTRY":"AUSTRALIE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"23.35","COUNTRY":"AUSTRALIE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"18037.512","COUNTRY":"AUSTRALIE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"38.209","COUNTRY":"AUSTRALIE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"3789.355","COUNTRY":"HONGRIE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"14.88","COUNTRY":"HONGRIE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"6103.809","COUNTRY":"HONGRIE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"23.968","COUNTRY":"HONGRIE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"8688.093","COUNTRY":"HONGRIE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"34.116","COUNTRY":"HONGRIE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"11162.706","COUNTRY":"ISLANDE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"25.07","COUNTRY":"ISLANDE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"10078.253","COUNTRY":"ISLANDE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"22.635","COUNTRY":"ISLANDE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"11434.985","COUNTRY":"ISLANDE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"25.682","COUNTRY":"ISLANDE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"8006.795","COUNTRY":"IRLANDE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"15.579","COUNTRY":"IRLANDE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"10665.142","COUNTRY":"IRLANDE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"20.751","COUNTRY":"IRLANDE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"14130.998","COUNTRY":"IRLANDE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"27.494","COUNTRY":"IRLANDE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"8194.403","COUNTRY":"ITALIE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"22.596","COUNTRY":"ITALIE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"8843.367","COUNTRY":"ITALIE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"24.385","COUNTRY":"ITALIE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"11509.686","COUNTRY":"ITALIE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"31.737","COUNTRY":"ITALIE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"9062.007","COUNTRY":"JAPON","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"24.276","COUNTRY":"JAPON","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"10738.621","COUNTRY":"JAPON","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"28.768","COUNTRY":"JAPON","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"18022.211","COUNTRY":"JAPON","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"48.28","COUNTRY":"JAPON","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"9655.788","COUNTRY":"CORÉE, RÉPUBLIQUE DE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"28.711","COUNTRY":"CORÉE, RÉPUBLIQUE DE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"10315.853","COUNTRY":"CORÉE, RÉPUBLIQUE DE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"30.673","COUNTRY":"CORÉE, RÉPUBLIQUE DE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"9570.4","COUNTRY":"CORÉE, RÉPUBLIQUE DE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"28.457","COUNTRY":"CORÉE, RÉPUBLIQUE DE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"21152.76","COUNTRY":"LUXEMBOURG","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"20.815","COUNTRY":"LUXEMBOURG","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"21595.267","COUNTRY":"LUXEMBOURG","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"21.251","COUNTRY":"LUXEMBOURG","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"46526.14","COUNTRY":"LUXEMBOURG","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"45.784","COUNTRY":"LUXEMBOURG","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"2895.599","COUNTRY":"MEXIQUE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"15.94","COUNTRY":"MEXIQUE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"3218.686","COUNTRY":"MEXIQUE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"17.719","COUNTRY":"MEXIQUE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"8948.92","COUNTRY":"MEXIQUE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"49.263","COUNTRY":"MEXIQUE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"8529.228","COUNTRY":"PAYS-BAS","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"17.365","COUNTRY":"PAYS-BAS","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"12446.04","COUNTRY":"PAYS-BAS","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"25.34","COUNTRY":"PAYS-BAS","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"19158.968","COUNTRY":"PAYS-BAS","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"39.008","COUNTRY":"PAYS-BAS","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"7438.444","COUNTRY":"NOUVELLE-ZÉLANDE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"20.061","COUNTRY":"NOUVELLE-ZÉLANDE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"10266.728","COUNTRY":"NOUVELLE-ZÉLANDE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"27.688","COUNTRY":"NOUVELLE-ZÉLANDE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"15087.561","COUNTRY":"NOUVELLE-ZÉLANDE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"40.69","COUNTRY":"NOUVELLE-ZÉLANDE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"11154.486","COUNTRY":"AUTRICHE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"22.851","COUNTRY":"AUTRICHE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"15094.11","COUNTRY":"AUTRICHE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"30.922","COUNTRY":"AUTRICHE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"16933.401","COUNTRY":"AUTRICHE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"34.689","COUNTRY":"AUTRICHE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"13104.384","COUNTRY":"NORVÈGE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"24.601","COUNTRY":"NORVÈGE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"15148.593","COUNTRY":"NORVÈGE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"28.439","COUNTRY":"NORVÈGE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"20961.632","COUNTRY":"NORVÈGE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"39.352","COUNTRY":"NORVÈGE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"7026.407","COUNTRY":"POLOGNE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"27.68","COUNTRY":"POLOGNE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"6455.112","COUNTRY":"POLOGNE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"25.43","COUNTRY":"POLOGNE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"9707.663","COUNTRY":"POLOGNE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"38.243","COUNTRY":"POLOGNE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"6473.84","COUNTRY":"PORTUGAL","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"22.53","COUNTRY":"PORTUGAL","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"8820.674","COUNTRY":"PORTUGAL","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"30.698","COUNTRY":"PORTUGAL","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"11812.792","COUNTRY":"PORTUGAL","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"41.111","COUNTRY":"PORTUGAL","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"6234.522","COUNTRY":"SLOVAQUIE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"21.473","COUNTRY":"SLOVAQUIE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"6453.187","COUNTRY":"SLOVAQUIE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"22.226","COUNTRY":"SLOVAQUIE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"","COUNTRY":"SLOVAQUIE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"","COUNTRY":"SLOVAQUIE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"6969.735","COUNTRY":"ESPAGNE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"20.721","COUNTRY":"ESPAGNE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"8528.339","COUNTRY":"ESPAGNE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"25.355","COUNTRY":"ESPAGNE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"12488.88","COUNTRY":"ESPAGNE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"37.13","COUNTRY":"ESPAGNE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"10804.312","COUNTRY":"SUÈDE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"23.16","COUNTRY":"SUÈDE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"11341.719","COUNTRY":"SUÈDE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"24.312","COUNTRY":"SUÈDE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"24071.784","COUNTRY":"SUÈDE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"51.599","COUNTRY":"SUÈDE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"","COUNTRY":"SUISSE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"","COUNTRY":"SUISSE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"","COUNTRY":"SUISSE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"","COUNTRY":"SUISSE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"","COUNTRY":"SUISSE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"","COUNTRY":"SUISSE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"3589.188","COUNTRY":"TURQUIE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"15.457","COUNTRY":"TURQUIE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"3267.732","COUNTRY":"TURQUIE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"14.072","COUNTRY":"TURQUIE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"8927.184","COUNTRY":"TURQUIE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"38.445","COUNTRY":"TURQUIE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"11367.416","COUNTRY":"ROYAUME-UNI","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"27.792","COUNTRY":"ROYAUME-UNI","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"12451.663","COUNTRY":"ROYAUME-UNI","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"30.443","COUNTRY":"ROYAUME-UNI","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"24541.552","COUNTRY":"ROYAUME-UNI","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"60.001","COUNTRY":"ROYAUME-UNI","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"11318.522","COUNTRY":"ÉTATS-UNIS","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"20.614","COUNTRY":"ÉTATS-UNIS","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"12995.04","COUNTRY":"ÉTATS-UNIS","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"23.667","COUNTRY":"ÉTATS-UNIS","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"29328.235","COUNTRY":"ÉTATS-UNIS","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"53.415","COUNTRY":"ÉTATS-UNIS","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"10216.37","COUNTRY":"BELGIQUE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"22.796","COUNTRY":"BELGIQUE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"13118.368","COUNTRY":"BELGIQUE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"29.272","COUNTRY":"BELGIQUE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"16599.445","COUNTRY":"BELGIQUE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"37.039","COUNTRY":"BELGIQUE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"4123.569","COUNTRY":"CHILI","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"4320.59","COUNTRY":"CHILI","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2015","LOCATION":""},{"value":"18.23","COUNTRY":"CHILI","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"18.708","COUNTRY":"CHILI","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2015","LOCATION":""},{"value":"4231.641","COUNTRY":"CHILI","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"4477.89","COUNTRY":"CHILI","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2015","LOCATION":""},{"value":"18.708","COUNTRY":"CHILI","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"19.389","COUNTRY":"CHILI","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2015","LOCATION":""},{"value":"7836.262","COUNTRY":"CHILI","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"6951.927","COUNTRY":"CHILI","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2015","LOCATION":""},{"value":"34.644","COUNTRY":"CHILI","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"30.101","COUNTRY":"CHILI","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2015","LOCATION":""},{"value":"6759.774","COUNTRY":"ESTONIE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"23.706","COUNTRY":"ESTONIE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"7077.216","COUNTRY":"ESTONIE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"24.819","COUNTRY":"ESTONIE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"12375.265","COUNTRY":"ESTONIE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"43.398","COUNTRY":"ESTONIE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"6833.446","COUNTRY":"ISRAËL","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"19.37","COUNTRY":"ISRAËL","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"6698.736","COUNTRY":"ISRAËL","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"18.988","COUNTRY":"ISRAËL","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"12989.141","COUNTRY":"ISRAËL","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"36.819","COUNTRY":"ISRAËL","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"6585.167","COUNTRY":"LETTONIE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"27.702","COUNTRY":"LETTONIE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"6628.678","COUNTRY":"LETTONIE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"27.885","COUNTRY":"LETTONIE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"8961.831","COUNTRY":"LETTONIE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"37.7","COUNTRY":"LETTONIE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"9335.47","COUNTRY":"SLOVÉNIE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"30.106","COUNTRY":"SLOVÉNIE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"8785.286","COUNTRY":"SLOVÉNIE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"28.332","COUNTRY":"SLOVÉNIE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"12067.298","COUNTRY":"SLOVÉNIE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"38.916","COUNTRY":"SLOVÉNIE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"9256.492","COUNTRY":"CANADA","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"20.529","COUNTRY":"CANADA","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"12779.667","COUNTRY":"CANADA","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"28.343","COUNTRY":"CANADA","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"","COUNTRY":"CANADA","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"","COUNTRY":"CANADA","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"5100.848","COUNTRY":"TCHÉQUIE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"15.745","COUNTRY":"TCHÉQUIE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"8190.922","COUNTRY":"TCHÉQUIE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"25.283","COUNTRY":"TCHÉQUIE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"10520.925","COUNTRY":"TCHÉQUIE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"32.475","COUNTRY":"TCHÉQUIE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"11498.747","COUNTRY":"DANEMARK","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"23.984","COUNTRY":"DANEMARK","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"11216.24","COUNTRY":"DANEMARK","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"23.395","COUNTRY":"DANEMARK","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"","COUNTRY":"DANEMARK","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"","COUNTRY":"DANEMARK","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"8811.806","COUNTRY":"FINLANDE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"21.187","COUNTRY":"FINLANDE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"10387.478","COUNTRY":"FINLANDE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"24.976","COUNTRY":"FINLANDE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"17892.541","COUNTRY":"FINLANDE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"43.022","COUNTRY":"FINLANDE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"7396.081","COUNTRY":"FRANCE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"18.316","COUNTRY":"FRANCE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"11815.494","COUNTRY":"FRANCE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"29.26","COUNTRY":"FRANCE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"16422.299","COUNTRY":"FRANCE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"40.669","COUNTRY":"FRANCE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"8545.92","COUNTRY":"ALLEMAGNE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"18.112","COUNTRY":"ALLEMAGNE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"11683.75","COUNTRY":"ALLEMAGNE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"24.762","COUNTRY":"ALLEMAGNE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"17179.698","COUNTRY":"ALLEMAGNE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"36.41","COUNTRY":"ALLEMAGNE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"","COUNTRY":"GRÈCE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"","COUNTRY":"GRÈCE","ISC11_LEVEL_CAT":"L1","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"","COUNTRY":"GRÈCE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"","COUNTRY":"GRÈCE","ISC11_LEVEL_CAT":"L2T3","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""},{"value":"","COUNTRY":"GRÈCE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST","TIME_PERIOD":"2014","LOCATION":""},{"value":"","COUNTRY":"GRÈCE","ISC11_LEVEL_CAT":"L5T8","INDICATOR":"FIN_PERSTUD_INST-GDP","TIME_PERIOD":"2014","LOCATION":""}];
  var dataFromFile = _.cloneDeep(data);

  var manualReusableParameters = {"rotateXRow":{"value":true,"type":"checkbox","label":"pivoter l'étiquette des X","initial_value":false,"activated":1,"category":"general"},"chart_width":{"value":800,"type":"slider","label":"Largeur du graphique","initial_value":600,"min":300,"max":800,"activated":1,"category":"general"},"chart_height":{"value":400,"type":"slider","label":"Hauteur du graphique","initial_value":400,"min":200,"max":800,"activated":1,"category":"general"},"padding_bottom":{"value":64,"type":"slider","label":"marge basse","initial_value":0,"min":-100,"max":100,"activated":1,"category":"general"},"padding_left":{"value":26,"type":"slider","label":"marge gauche","initial_value":0,"min":-100,"max":100,"activated":1,"category":"general"},"padding_right":{"value":0,"type":"slider","label":"marge droite","initial_value":0,"min":-100,"max":100,"activated":1,"category":"general"},"padding_top":{"value":0,"type":"slider","label":"marge haute","initial_value":0,"min":-100,"max":100,"activated":1,"category":"general"},"sort_descending":{"value":true,"type":"checkbox","label":"tri décroissant","initial_value":true,"activated":1,"category":"general"},"invert_order":{"value":false,"type":"checkbox","label":"inverser l'ordre","initial_value":false,"activated":1,"category":"general"},"differentAxisY":{"value":false,"type":"checkbox","label":"Adapter l'axe des Y aux données","initial_value":false,"activated":1,"category":"general"},"rangeX":{"type":"checkInputs","label":"Range X personalisée","initial_left_value":null,"initial_right_value":null,"calculated_left_value":null,"calculated_right_value":null,"manual_left_value":null,"manual_right_value":null,"activated":0,"category":"general"},"rangeY":{"type":"checkInputs","label":"Range Y personalisée","initial_left_value":null,"initial_right_value":null,"calculated_left_value":0,"calculated_right_value":60.001,"manual_left_value":null,"manual_right_value":null,"activated":1,"category":"general"},"color_field_select":{"value":"libeCategoricalColors","type":"colorFieldSelect","label":"Jeu de couleurs","initial_value":"libeCategoricalColors","activated":0,"fields":["libeCategoricalColors","LibePoliticalColors","schemeDark2","schemeAccent","schemePastel2","schemeSet2","schemeSet1","schemePastel1","schemeCategory10","schemeSet3","schemePaired","schemeCategory20","schemeCategory20b","schemeCategory20c"],"category":"color"},"persColorsCheck":{"value":false,"type":"persColorsCheck","label":"Couleurs personalisées","initial_value":false,"activated":1,"category":"color"},"indice_100":{"value":false,"type":"checkbox","label":"Démarrer à l'indice 100","initial_value":false,"activated":0,"category":"calculs"},"displayLabel":{"value":false,"type":"checkbox","label":"afficher la valeur","initial_value":false,"activated":1,"category":"labels"},"startEndValues":{"type":"checkInputs","label":"Valeurs de début et de fin","initial_left_value":null,"initial_right_value":null,"calculated_left_value":null,"calculated_right_value":null,"manual_left_value":null,"manual_right_value":null,"activated":0,"category":"filter"},"caseLegend":{"type":"checkSelects","label":"Afficher la légende","range":[{"value":"topRight","label":"En haut à droite"},{"value":"topLeft","label":"En haut à gauche"},{"value":"bottomLeft","label":"En bas à gauche"},{"value":"bottomRight","label":"En bas à droite"}],"initial_range_value":"topRight","manual_range_value":null,"activated":1,"category":"legend"},"padding_left_legend":{"value":0,"type":"slider","label":"marge gauche légende","initial_value":0,"min":-100,"max":100,"category":"legend","dependOn":"caseLegend"},"padding_top_legend":{"value":0,"type":"slider","label":"marge haute légende","initial_value":0,"min":-100,"max":100,"category":"legend","dependOn":"caseLegend"},"legendOrientation":{"type":"simpleSelect","label":"Orientation de la légende","range":[{"value":"vertical","label":"Verticale"},{"value":"horizontal","label":"Horizontale"}],"initial_range_value":"vertical","manual_range_value":null,"category":"legend","dependOn":"caseLegend"},"inner_padding_legend":{"value":2,"type":"slider","label":"Marge intérieure de la légende","initial_value":2,"min":-100,"max":100,"category":"legend","dependOn":"caseLegend"},"textLegendOtherCat":{"type":"simpleInputs","label":"Texte de la légende si autre","category":"legend","dependOn":"caseLegend"},"leftAxisTickNumber":{"value":6,"type":"slider","label":"Nombre de graduations à gauche","initial_value":10,"min":0,"max":20,"activated":1,"category":"grid"},"bottomAxisTickNumber":{"value":5,"type":"slider","label":"Nombre de graduations en bas","initial_value":5,"min":0,"max":20,"activated":1,"category":"grid"},"leftAxisStroke":{"type":"simpleSelect","label":"Couleur de l'axe gauche","range":[{"value":"black","label":"noir"},{"value":"#3c3c3b","label":"gris foncé"},{"value":"#7c7c7b","label":"gris moyen"},{"value":"#c6c6c6","label":"gris clair"},{"value":"#e4e4e4","label":"gris très clair"},{"value":"#f4f4f4","label":"gris très très clair"},{"value":"#fff","label":"invisible"}],"initial_range_value":"black","manual_range_value":"#fff","activated":1,"category":"grid"},"bottomAxisStroke":{"type":"simpleSelect","label":"Couleur de l'axe bas","range":[{"value":"black","label":"noir"},{"value":"#3c3c3b","label":"gris foncé"},{"value":"#7c7c7b","label":"gris moyen"},{"value":"#c6c6c6","label":"gris clair"},{"value":"#e4e4e4","label":"gris très clair"},{"value":"#f4f4f4","label":"gris très très clair"},{"value":"#fff","label":"invisible"}],"initial_range_value":"black","manual_range_value":"black","activated":1,"category":"grid"},"ticksStroke":{"type":"simpleSelect","label":"Couleur des graduations","range":[{"value":"black","label":"noir"},{"value":"#3c3c3b","label":"gris foncé"},{"value":"#7c7c7b","label":"gris moyen"},{"value":"#c6c6c6","label":"gris clair"},{"value":"#e4e4e4","label":"gris très clair"},{"value":"#f4f4f4","label":"gris très très clair"},{"value":"#fff","label":"invisible"}],"initial_range_value":"black","manual_range_value":"#e4e4e4","activated":1,"category":"grid"},"leftTickSize":{"type":"simpleSelect","label":"Taille des graduations horizontales","range":[{"value":"small","label":"petites"},{"value":"fullWidth","label":"largeur complète"},{"value":"invisible","label":"invisibles"}],"initial_range_value":"small","manual_range_value":"fullWidth","activated":1,"category":"grid"},"bottomTickSize":{"type":"simpleSelect","label":"Taille des graduations verticales","range":[{"value":"small","label":"petites"},{"value":"fullHeight","label":"hauteur complète"},{"value":"invisible","label":"invisibles"}],"initial_range_value":"small","manual_range_value":"small","activated":1,"category":"grid"},"yAxisLabel":{"value":false,"type":"checkbox","label":"Etiquette de l'axe gauche","initial_value":false,"activated":1,"category":"labels"},"xAxisLabel":{"value":false,"type":"checkbox","label":"Etiquette de l'axe bas","initial_value":false,"activated":1,"category":"labels"},"yAxisLabelPadding":{"value":0,"type":"slider","label":"Marge de l'étiquette de l'axe gauche","initial_value":0,"min":-100,"max":100,"category":"labels","activated":false,"dependOn":"yAxisLabel"},"xAxisLabelPadding":{"value":0,"type":"slider","label":"Marge de l'étiquette de l'axe bas","initial_value":0,"min":-100,"max":100,"category":"labels","activated":false,"dependOn":"xAxisLabel"},"yAxisLabelText":{"type":"simpleInputs","label":"Texte de l'étiquette de l'axe gauche","category":"labels","activated":false,"dependOn":"yAxisLabel"},"xAxisLabelText":{"type":"simpleInputs","label":"Texte de l'étiquette de l'axe bas","category":"labels","activated":false,"dependOn":"xAxisLabel"},"trimKValue":{"value":true,"type":"checkbox","label":"Supprimer les espaces inutiles","initial_value":true,"activated":1,"category":"textRemplacement"},"hideCircles":{"value":false,"type":"checkbox","label":"Supprimer les cercles","initial_value":false,"activated":0,"category":"general"},"dateField":{"value":false,"type":"checkSelects","label":"Y a-t-il un champ date ?","range":"selectedFields","initial_range_value":"topRight","manual_range_value":null,"initial_value":false,"activated":1,"category":"textRemplacement"},"dateFieldFormat":{"value":"DD/MM/YYYY","initial_value":"DD/MM/YYYY","type":"simpleInputs","label":"Format de date","category":"textRemplacement","activated":false,"dependOn":"dateField"},"previousDate":{"type":"simpleInputs","label":"date n-1","category":"textRemplacement","activated":false,"dependOn":"dateField"},"groupingFunction":{"type":"simpleSelect","label":"Fonction de réduction des données","range":[{"value":"sum","label":"Somme"},{"value":"mean","label":"moyenne"},{"value":"median","label":"médianne"}],"initial_range_value":null,"manual_range_value":"sum","activated":1,"category":"calculs"},"logScale":{"value":false,"type":"checkbox","label":"Echelle logarithmique","initial_value":false,"activated":0,"category":"calculs"},"beeswarnRadius":{"value":2,"type":"slider","label":"Taille des points","initial_value":2,"min":1,"max":20,"activated":0,"category":"general"},"beeswarnCollide":{"value":3,"type":"slider","label":"Eloignement des points","initial_value":3,"min":1,"max":20,"activated":0,"category":"general"},"circleRadius":{"value":3,"type":"slider","label":"Taille des cercles","initial_value":3,"min":1,"max":20,"activated":0,"category":"general"},"circleOpacity":{"value":0.9,"type":"slider","label":"Opacité des cercles","initial_value":0.9,"min":0,"max":1,"step":0.1,"activated":0,"category":"general"},"customCode":{"type":"simpleInputs","label":"Ajouter du code js","activated":1,"category":"textRemplacement"},"colorizeField":{"value":true,"type":"checkbox","label":"Colorier un champ en fonction de critères","initial_value":false,"activated":1,"category":"color"},"colorizeFieldText":{"value":"FRANCE","type":"simpleInputs","label":"Critères pour colorier le champ","activated":true,"category":"color","dependOn":"colorizeField"},"colorizeFieldSelectField":{"type":"simpleSelect","label":"Nom du champ","range":[{"label":"Dans quel champ ?","value":""},{"label":"COUNTRY","value":"COUNTRY"},{"label":"ISC11_LEVEL_CAT","value":"ISC11_LEVEL_CAT"},{"label":"value","value":"value"}],"initial_range_value":"black","manual_range_value":"COUNTRY","activated":true,"category":"color","dependOn":"colorizeField"},"stackedBarWhiteSeparator":{"value":false,"type":"checkbox","label":"Séparer les rectangles","initial_value":false,"activated":0,"category":"general"},"stackedBarInsideOrder":{"type":"simpleSelect","label":"Ordre des valeurs à l'intérieur des barres","range":[{"value":"stackOrderNone","label":"Aucun ordre"},{"value":"stackOrderAscending","label":"Ordre croissant"},{"value":"stackOrderDescending","label":"Ordre décroissant"},{"value":"stackOrderInsideOut","label":"Ordre intérieur extérieur"},{"value":"stackOrderReverse","label":"Ordre inversé"}],"initial_range_value":"stackOrderNone","manual_range_value":"stackOrderNone","activated":0,"category":"general"},"CheckIfNochart":{"value":false,"type":"checkbox","label":"Pas un graph","initial_value":false,"activated":0,"category":"none"},"automaticDate":{"value":false,"type":"checkbox","label":"Reconnaissance automatique des dates","initial_value":false,"activated":1,"category":"general"}};

  var graphParameters = {"selected_xRows":["COUNTRY","ISC11_LEVEL_CAT"],"selected_yRows":["value"],"selected_size":[],"selected_color":[],"selected_label":[],"selected_tooltip":[],"personalizedColorsObject":{},"selectedColorScheme":"libeCategoricalColors","additionnalParam":"","selected_graph":"barChart","chartTitle":"Dépenses annuelle par élève en part de PIB par tête","chartSource":"OCDE","annotations":[]};

  var manualCustomParameters = {"fieldsToReplace":[{"name":"ISC11_LEVEL_CAT","oldValue":"L1","newValue":"Primaire"},{"name":"ISC11_LEVEL_CAT","oldValue":"L2T3","newValue":"Secondaire"},{"name":"ISC11_LEVEL_CAT","oldValue":"L5T8","newValue":"Supérieur"}],"filteredFields":[{"name":"TIME_PERIOD","comparator":"==","varToCompare":"2014","this_valueType":"num","this_valueVars":[],"fieldName":"TIME_PERIOD"},{"name":"INDICATOR","comparator":"==","varToCompare":"FIN_PERSTUD_INST-GDP","this_valueType":"notNum","this_valueVars":["FIN_PERSTUD_INST","FIN_PERSTUD_INST-GDP"],"fieldName":"INDICATOR"},{"name":"COUNTRY","comparator":"!=","varToCompare":"GRÈCE","this_valueType":"notNum","this_valueVars":["AUSTRALIE","HONGRIE","ISLANDE","IRLANDE","ITALIE","JAPON","CORÉE, RÉPUBLIQUE DE","LUXEMBOURG","MEXIQUE","PAYS-BAS","NOUVELLE-ZÉLANDE","AUTRICHE","NORVÈGE","POLOGNE","PORTUGAL","SLOVAQUIE","ESPAGNE","SUÈDE","SUISSE","TURQUIE","ROYAUME-UNI","ÉTATS-UNIS","BELGIQUE","CHILI","ESTONIE","ISRAËL","LETTONIE","SLOVÉNIE","CANADA","TCHÉQUIE","DANEMARK","FINLANDE","FRANCE","ALLEMAGNE","GRÈCE"],"fieldName":"COUNTRY"},{"name":"COUNTRY","comparator":"!=","varToCompare":"SUISSE","this_valueType":"notNum","this_valueVars":["AUSTRALIE","HONGRIE","ISLANDE","IRLANDE","ITALIE","JAPON","CORÉE, RÉPUBLIQUE DE","LUXEMBOURG","MEXIQUE","PAYS-BAS","NOUVELLE-ZÉLANDE","AUTRICHE","NORVÈGE","POLOGNE","PORTUGAL","SLOVAQUIE","ESPAGNE","SUÈDE","SUISSE","TURQUIE","ROYAUME-UNI","ÉTATS-UNIS","BELGIQUE","CHILI","ESTONIE","ISRAËL","LETTONIE","SLOVÉNIE","CANADA","TCHÉQUIE","DANEMARK","FINLANDE","FRANCE","ALLEMAGNE","GRÈCE"],"fieldName":"COUNTRY"}],"rowsToSwitch":["Primaire","Supérieur","Secondaire"]};

  color = findColorsScheme(graphParameters.selectedColorScheme);


  graphParameters.annotations.forEach(function(d){

    d.type = d3[d.functionName];


  })

  var parametersType = [{
    selector:'dropdiv_x', tagsArray:graphParameters['selected_xRows'], dropzoneName:'dropzoneX'},
    {selector:'dropdiv_y', tagsArray:graphParameters['selected_yRows'], dropzoneName:'dropzoneY'},
    {selector:'size_tags', tagsArray:graphParameters['selected_size'], dropzoneName:'dropzoneSize'},
    {selector:'color_tags', tagsArray:graphParameters['selected_color'], dropzoneName:'dropzoneColor'},
    {selector:'label_tags', tagsArray:graphParameters['selected_label'], dropzoneName:'dropzoneLabel'}
    ];

    var div = d3.select("body").append("div")
    .attr("id", "tooltip")
    .attr('class', 'box');


    var parseTime = d3.timeParse('%Y/%m/%d');

    d3.select("#chart")
    .attr("class", graphParameters.selected_graph);

    d3.select("#chartTitle")
    .text(graphParameters['chartTitle']);


        d3.select("#chartSource")
    .text(graphParameters['chartSource']);

    function initChart() {

      var svg = d3.select("svg")
      .call(responsivefy);

      margin = {
        top: 20,
        right: 20,
        bottom: 60,
        left: 50
      };

      width = +svg.attr("width") - margin.left - margin.right;
      height = +svg.attr("height") - margin.top - margin.bottom;

      var g = svg.append("g")
      .attr('class', 'graphContainer')
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

      initAnnotations()

      g.append("g")
      .attr("class", "axis axis--x")
      .attr("transform", "translate(0," + height + ")");

      g.append("g")
      .attr("class", "axis axis--y")
      .attr('transform', 'translate(0,0)');

      g.append("g")
      .attr('class', 'innerGraph');

    }

  function initAnnotations(){

  d3.select("#chart svg g.annotation-group").remove()

  var annotationGroup = d3.select("#chart svg g.graphContainer")
  .append("g")
  .attr("class", "annotation-group");
  }

    var makeAnnotations_ = d3.annotation()
    .editMode(false)
  // .type(annotationType)
  ;



  var annotations = graphParameters.annotations ? graphParameters.annotations : [];

  function makeAnnotation(){

    for (i in makeAnnotations_.annotations()){

      var d = makeAnnotations_.annotations()[i];
      annotations[i].x = d.x;
      annotations[i].y = d.y;
      annotations[i].dx = d.dx;
      annotations[i].dy = d.dy;

    }

    makeAnnotations_
    .annotations(annotations)

    for (i in annotations){
      var d = annotations[i];
      makeAnnotations_.annotations()[i].index = d.index;
    }

    d3.select("#chart svg g.graphContainer g.annotation-group")
    .call(makeAnnotations_);

      d3.selectAll(".annotation-group .annotations .annotation text")
      .attr('transform', function(d){return 'rotate(' + (+d.note.orientation) + ') translate(' + (+d.note.textPadding) + ',0)'});

    d3.select(".annotation-group").node().parentNode.appendChild(d3.select(".annotation-group").node())

  }

function makeBarchart(data_) {


    var kValue = graphParameters['selected_xRows'][0];
    var dValue = graphParameters['selected_yRows'][0];
    var dValues = graphParameters['selected_yRows'];
    var kValues = graphParameters['selected_xRows'];

    var data = _.cloneDeep(data_)


    data = recalculateAndTransformValues(data, kValue, dValues, kValues)

    if (kValues[1]){

        var new_d_values = []
        for (i in d3.keys(data[0])){
            var this_d = d3.keys(data[0])[i]
            if (this_d != dValue && this_d != kValues[0] && this_d != kValues[1]){
                new_d_values.push(this_d)
            }
        }
        dValues = new_d_values

        makeVarSwitch(dValues, makeBarchart, dataFromFile.filter(function(d){return _.uniq(d3.values(d))!= ""}));

        dValues = manualCustomParameters['rowsToSwitch'] ? _.cloneDeep(manualCustomParameters['rowsToSwitch']) : dValues


        dValue = dValues[0]

        var multipleKValues = 1


        
    }


    data.forEach(function(d) {
        d[dValue] = formatNumbers(d[dValue]);
        for (i in dValues){

            if (manualReusableParameters.dateField.value == false ||  dValues[i] != manualReusableParameters.dateField.manual_range_value){
                d[dValues[i]] = formatNumbers(d[dValues[i]]);
            }
        }
    })

    var svg = d3.select("svg");
    var g = svg.select('g.graphContainer');
    var g_inner = g.select('g.innerGraph');

    updateParameters();

    // var this_grouped_data = data.map(function(d) { return d.this_key; })
    // .map(function(d){return {key:d, value: d3.sum(data.filter(function(e){return e.this_key == d}), function(e){return e.this_value})}});

    this_grouped_data = groupbyKVMultiple(data, kValue, dValues, d3[manualReusableParameters.groupingFunction.manual_range_value ? manualReusableParameters.groupingFunction.manual_range_value : manualReusableParameters.groupingFunction.initial_range_value]);
    this_grouped_data = this_grouped_data.filter(function(d) { return d[kValue] != ''});

    if (manualReusableParameters.differentAxisY.value ==1){
    manualReusableParameters.rangeY.calculated_left_value =  d3.min(this_grouped_data, function(d) { return d[dValue]});
    manualReusableParameters.rangeY.calculated_right_value =  d3.max(this_grouped_data, function(d) { return d[dValue]});

    }
    else{
    manualReusableParameters.rangeY.calculated_left_value =  d3.min(this_grouped_data, function(d) { return d3.min(d3.entries(d).filter(function(k){ return dValues.indexOf(k.key) != -1}).map(function(v) {return v.value}))});
    manualReusableParameters.rangeY.calculated_right_value =  d3.max(this_grouped_data, function(d) { return d3.max(d3.entries(d).filter(function(k){ return dValues.indexOf(k.key) != -1}).map(function(v) {return v.value}))});

    }



    var thisYMin = manualReusableParameters.rangeY.value === false ?  manualReusableParameters.rangeY.calculated_left_value : manualReusableParameters.rangeY.manual_left_value !== null ? manualReusableParameters.rangeY.manual_left_value : manualReusableParameters.rangeY.calculated_left_value;
    var thisYMax = manualReusableParameters.rangeY.value === false ?  manualReusableParameters.rangeY.calculated_right_value : manualReusableParameters.rangeY.manual_right_value !== null ? manualReusableParameters.rangeY.manual_right_value : manualReusableParameters.rangeY.calculated_right_value;

    // reGenerateParameters();

if (manualReusableParameters.sort_descending.value == 1){


if (manualReusableParameters.invert_order.value == 1){

this_grouped_data = this_grouped_data.sort(function(a, b) { return a[dValue] - b[dValue]});

}

else{

    this_grouped_data = this_grouped_data.sort(function(a, b) { return b[dValue] - a[dValue]});

}


}
else{

if (manualReusableParameters.invert_order.value == 1){
this_grouped_data = this_grouped_data.reverse(function(d) { return d[kValue]; });

}

else{
    this_grouped_data = this_grouped_data;
}

}


 if (graphParameters.selected_tooltip && graphParameters.selected_tooltip.length > 0){
        this_grouped_data = add_tooltip_values(this_grouped_data, data, kValue)
    }

    xScale = d3.scaleBand().rangeRound([0, width]).padding(0.1);

    yScale = d3.scaleLinear().rangeRound([height,  0]);

    xScale.domain(this_grouped_data.map(function(d) { return d[kValue];}));
    yScale.domain([Math.min(thisYMin, 0), thisYMax]);


    changeAxis(xScale, yScale)

    // customizeAxis()

  // g.select("g.axis.axis--x")
  // .attr("transform", "translate(" + manualReusableParameters.padding_left.value + "," + (height + manualReusableParameters.padding_top.value) +")")

    g.select('g.innerGraph')
    .attr("transform", "translate(" + manualReusableParameters.padding_left.value + "," + (manualReusableParameters.padding_top.value) +")");



    g.select("g.axis.axis--y")
    .attr("transform", "translate(" + (manualReusableParameters.padding_left.value) + "," + (manualReusableParameters.padding_top.value) +")")
    // .attr('transform', 'translate(0,0)')
    .call(axis_left);

    var all_bars = g_inner.selectAll("g.bar").data(this_grouped_data);

    all_bars
    .transition()
    .duration(200)
    .attr('transform', function(d){return 'translate(' +  xScale(d[kValue]) + ','+ yScale(Math.max(0, d[dValue])) + ')'})
    .select('rect')
    .attr("x", 0)
    .attr("y", 0)
    .attr("width", xScale.bandwidth())
    .attr("height", function(d) { return Math.abs(yScale(0) - yScale(d[dValue])); })
    .attr('fill', function(d){ return thisYMin >=0 ? colorBarchart('plain') :  d[dValue] >=0  ? colorBarchart('positive') : colorBarchart('negative')})

    all_bars.exit().transition().duration(200).remove();

    var all_barsE = all_bars
    .enter()
    .append('g')
    .attr('class', 'bar')
    .attr('transform', function(d){return 'translate(' +  xScale(d[kValue]) + ','+ yScale(Math.max(0, d[dValue])) + ')'});

    all_barsE
    .append("rect")
    .attr("class", "bar")
    .attr("x", 0)
    .attr("y", 0)
    .attr("width", xScale.bandwidth())
    .attr("height", function(d) { return Math.abs(yScale(0) - yScale(d[dValue])); })
    .attr('fill', function(d){ return thisYMin >=0 ? colorBarchart('plain') :  d[dValue] >=0  ? colorBarchart('positive') : colorBarchart('negative')})
    .on('mouseover', function(d, i){ 
        if (multipleKValues){ show_tooltip(d, d[kValue], '', [kValues, dValues])}
        else{ show_tooltip(d)}
    })
    .on('mouseout', function(d){ hide_tooltip()});

    all_barsE
    .append("text")
    .attr("dy", ".75em")
    .attr("text-anchor", "middle")
    .attr("fill", "#333")
    .style('font-size', '12px')
    .style('pointer-events', 'none');

    all_bars
    .merge(all_barsE)
    .select("text")
    .attr("y", function(d){return Math.abs(yScale(0) - yScale(d[dValue])) > 14 ?  (d[dValue] > 0 ? 6 :  Math.abs(yScale(0) - yScale(d[dValue])) - 18) :  -12})
    .attr("x",( xScale.bandwidth()/2))
    .text(function(d) { return manualReusableParameters.displayLabel.value == true ? String(_.round(d[dValue], 2)).replace('.', ',') : ''});

    g.select("g.axis.axis--x")
    .attr("transform", "translate(" + manualReusableParameters.padding_left.value + "," + (height + manualReusableParameters.padding_top.value) + ")")
    .call(axis_bottom)
    .selectAll("text")
    .style("text-anchor", "middle")
    .attr("dx", "0em")
    .attr("dy", "0.7em")
    .attr("transform", "rotate(0)")
    ;

    if (manualReusableParameters.rotateXRow.value == true){

        g.select("g.axis.axis--x")
        .attr("transform", "translate(" + manualReusableParameters.padding_left.value + "," + (height + manualReusableParameters.padding_top.value) + ")")
        .selectAll("g.tick")
        .select("text")
        .style("text-anchor", "end")
        .attr("dx", "-.8em")
        .attr("dy", ".15em")
        .attr("transform", "rotate(-40)");

    }

    customizeAxis()


    drawLegend()


    colorizeOnlyOneCategory([{svg_element:'rect', look_in_object:false,  property_types:['fill'], reappend_nodes:false}])


    addCustomCode()

}

initChart();

makeBarchart(data);





makeAnnotation();

d3.select("svg").call(responsivefy)

// output_from_parsed_html_template = html_template.render(this_title=this_title, chart_html=chart_html, 
//         chart_data=data, chart_parameters=chart_parameters, chart_function=chart_function)

// 

function updateParameters(){

  var svg = d3.select("svg");

  svg
  .attr('width', manualReusableParameters.chart_width.value);

      // d3.select('div#chart')
      // .style('width', manualReusableParameters.chart_width.value);

      svg.attr("width", manualReusableParameters.chart_width.value);
      svg
      .attr('height', manualReusableParameters.chart_height.value);

      width = manualReusableParameters.chart_width.value - initMargin.left - initMargin.right;
      height = manualReusableParameters.chart_height.value - initMargin.top - initMargin.bottom;
      width = width  - manualReusableParameters.padding_left.value - manualReusableParameters.padding_right.value;
      height = height - manualReusableParameters.padding_bottom.value- manualReusableParameters.padding_top.value;

    }

/// MISCELLANEOUS FUNCTIONS

function emptyChart(){

  d3.select('#varSwitch').selectAll("*").remove();
  d3.select("#chart .graphContainer .innerGraph").selectAll("*").remove();
  d3.select("#chart .graphContainer .axis--x").selectAll("*").remove();
  d3.select("#chart .graphContainer .axis--y").selectAll("*").remove();
}

function responsivefy(svg, width, height) {

    // get container + svg aspect ratio
    var container = d3.select(svg.node().parentNode),
    width = parseInt(svg.style('width')),
    height = parseInt(svg.style("height")),
        // aspect = width / height;
        aspect = width / height;

    // add viewBox and preserve aspectratio properties
    // call resize so that svg resizes on initial page load
    svg.attr("viewBox", "0 0 " + width + " " + height)
    .attr("preserveAspectRatio", "xMinYMid")
    .call(resize);

    // to register multiple listeners for the same event type
    d3.select(window).on("resize." + container.attr("id"), resize);

    function resize() {

      var targetWidth = parseInt(container.style("width"));
      var targetHeight = Math.round(targetWidth / aspect);

      svg.attr("width", targetWidth);
      svg.attr("height", targetHeight);

    }
  }


      </script>
    </body>
    </html>